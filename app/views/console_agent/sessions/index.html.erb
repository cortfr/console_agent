<h2 style="margin-bottom: 16px; font-size: 20px;">Recent Sessions</h2>

<% if @sessions.empty? %>
  <div class="meta-card">
    <p class="text-muted">No sessions recorded yet.</p>
  </div>
<% else %>
  <table>
    <thead>
      <tr>
        <th>Time</th>
        <th>User</th>
        <th>Query</th>
        <th>Mode</th>
        <th>Tokens</th>
        <th>Executed?</th>
        <th>Duration</th>
      </tr>
    </thead>
    <tbody>
      <% @sessions.each do |session| %>
        <tr>
          <td class="mono"><%= session.created_at.strftime('%Y-%m-%d %H:%M') %></td>
          <td><%= session.user_name %></td>
          <td><a href="<%= console_agent.session_path(session) %>"><%= truncate(session.query, length: 80) %></a></td>
          <td><span class="badge badge-<%= session.mode %>"><%= session.mode %></span></td>
          <td class="mono"><%= session.input_tokens + session.output_tokens %></td>
          <td><%= session.executed? ? '<span class="check">Yes</span>'.html_safe : '<span class="cross">No</span>'.html_safe %></td>
          <td class="mono"><%= session.duration_ms ? "#{session.duration_ms}ms" : '-' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
